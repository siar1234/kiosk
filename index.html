<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ë§ˆíŠ¸ í‚¤ì˜¤ìŠ¤í¬ ì£¼ë¬¸</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* í°íŠ¸ ì„¤ì • ë° ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            -webkit-user-select: none; /* í…ìŠ¤íŠ¸ ì„ íƒ ë°©ì§€ (í‚¤ì˜¤ìŠ¤í¬ í™˜ê²½) */
            user-select: none;
            touch-action: manipulation; /* í„°ì¹˜ ì´ë²¤íŠ¸ ìµœì í™” */
        }
        /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° (í‚¤ì˜¤ìŠ¤í¬ì˜ ê¹”ë”í•œ ë””ìì¸ì„ ìœ„í•´) */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        /* í•­ëª© ì„ íƒ íš¨ê³¼ */
        .menu-item:active {
            transform: scale(0.98);
            box-shadow: 0 0 0 4px rgba(255, 107, 107, 0.5); /* íƒ­ ì‹œ ë¹¨ê°„ìƒ‰ í…Œë‘ë¦¬ íš¨ê³¼ */
            transition: all 0.1s ease-out;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">

<!-- Header -->
<header class="bg-red-600 p-4 shadow-lg sticky top-0 z-10">
    <h1 class="text-3xl font-bold text-white text-center">â˜• ìŠ¤ë§ˆíŠ¸ ì˜¤ë” í‚¤ì˜¤ìŠ¤í¬</h1>
    <p class="text-sm text-red-200 text-center mt-1">ì›í•˜ì‹œëŠ” ë©”ë‰´ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.</p>
</header>

<!-- Main Content Area: Menu & Categories -->
<div class="flex flex-1 overflow-hidden">

    <!-- Category Navigation (ì™¼ìª½ ì‚¬ì´ë“œë°” - ì„¸ë¡œ í™”ë©´ì— ë§ê²Œ ì¢ê²Œ ë°°ì¹˜) -->
    <nav id="category-nav" class="w-24 bg-gray-100 p-2 overflow-y-auto no-scrollbar flex flex-col shadow-inner">
        <!-- ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— JSë¡œ ë Œë”ë§ë©ë‹ˆë‹¤. -->
    </nav>

    <!-- Menu Items Display (ì˜¤ë¥¸ìª½ ë©”ì¸ ì˜ì—­) -->
    <main class="flex-1 p-4 overflow-y-auto no-scrollbar">
        <div id="menu-display" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
            <!-- ë©”ë‰´ í•­ëª©ë“¤ì´ ì—¬ê¸°ì— JSë¡œ ë Œë”ë§ë©ë‹ˆë‹¤. -->
        </div>
    </main>
</div>

<!-- Order Summary / Cart (í•˜ë‹¨ ì˜ì—­ - ì¥ë°”êµ¬ë‹ˆ) -->
<div class="bg-white p-4 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] sticky bottom-0 z-10">
    <div id="order-summary" class="flex justify-between items-center mb-3">
        <h2 class="text-xl font-bold text-gray-800">ğŸ“‹ ì¥ë°”êµ¬ë‹ˆ</h2>
        <button onclick="clearCart()" class="text-sm text-red-500 hover:text-red-700 font-semibold transition">ì „ì²´ ì·¨ì†Œ</button>
    </div>

    <!-- Cart Items List -->
    <div id="cart-items" class="max-h-24 overflow-y-auto no-scrollbar border-b border-gray-200 pb-2 mb-3">
        <!-- ì¥ë°”êµ¬ë‹ˆ í•­ëª©ë“¤ì´ ì—¬ê¸°ì— JSë¡œ ë Œë”ë§ë©ë‹ˆë‹¤. -->
        <p id="empty-cart-message" class="text-gray-400 text-center py-2 text-sm">ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.</p>
    </div>

    <!-- Total and Order Button -->
    <div class="flex justify-between items-center text-2xl font-extrabold text-gray-900 mb-4">
        <span>ì´ ê²°ì œ ê¸ˆì•¡:</span>
        <span id="total-price" class="text-red-600">0ì›</span>
    </div>

    <button onclick="placeOrder()" id="order-button"
            class="w-full py-4 text-white font-bold rounded-xl shadow-lg transition duration-200
                   bg-red-600 hover:bg-red-700 disabled:bg-red-300 disabled:cursor-not-allowed text-xl"
            disabled>
        ì£¼ë¬¸ ë° ê²°ì œí•˜ê¸°
    </button>

    <!-- Notification Message Box (ëŒ€ì²´ìš© Alert) -->
    <div id="kiosk-message" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4" onclick="hideMessage()">
        <div class="bg-white p-6 rounded-2xl shadow-2xl max-w-sm w-full text-center" onclick="event.stopPropagation()">
            <div id="message-content" class="text-lg font-semibold mb-4 text-gray-800"></div>
            <button onclick="hideMessage()" class="bg-red-500 text-white py-2 px-6 rounded-lg font-medium hover:bg-red-600 transition">í™•ì¸</button>
        </div>
    </div>

    <video src="https://videos.openai.com/az/files/00000000-9550-7284-8380-88a80bbc0167%2Fraw?se=2025-12-08T00%3A00%3A00Z&sp=r&sv=2024-08-04&sr=b&skoid=8ebb0df1-a278-4e2e-9c20-f2d373479b3a&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2025-12-04T01%3A53%3A22Z&ske=2025-12-11T01%3A58%3A22Z&sks=b&skv=2024-08-04&sig=8kaxm8ASyej/JxNVViJ1uh5Zh0kCP8maurxnPyY5uH8%3D&ac=oaisdsorprcentralus"></video>
</div>


<script>
    // ìƒìˆ˜ ë° ì´ˆê¸° ìƒíƒœ
    const APP_ID = typeof __app_id !== 'undefined' ? __app_id : 'kiosk-default-app';
    let cart = {}; // { itemId: { item, count } }
    let currentCategory = 'coffee';

    // ëª©ì—… ë©”ë‰´ ë°ì´í„°
    const menuData = {
        'coffee': [
            { id: 'ame', name: 'ì•„ë©”ë¦¬ì¹´ë…¸', price: 4000, img: 'https://placehold.co/150x150/ff6b6b/ffffff?text=AME' },
            { id: 'lat', name: 'ì¹´í˜ ë¼ë–¼', price: 5000, img: 'https://placehold.co/150x150/4ecdc4/ffffff?text=LAT' },
            { id: 'car', name: 'ì¹´ë¼ë©œ ë§ˆí‚¤ì•„í† ', price: 5500, img: 'https://placehold.co/150x150/45b7d1/ffffff?text=CAR' },
            { id: 'van', name: 'ë°”ë‹ë¼ ë¼ë–¼', price: 5200, img: 'https://placehold.co/150x150/f7a37a/ffffff?text=VAN' },
        ],
        'tea': [
            { id: 'gre', name: 'ë…¹ì°¨', price: 3500, img: 'https://placehold.co/150x150/8d8d8d/ffffff?text=TEA' },
            { id: 'lem', name: 'ë ˆëª¬ì°¨', price: 4500, img: 'https://placehold.co/150x150/ffe66d/000000?text=LEM' },
            { id: 'cha', name: 'ì–¼ê·¸ë ˆì´', price: 3800, img: 'https://placehold.co/150x150/9b59b6/ffffff?text=EAR' },
        ],
        'dessert': [
            { id: 'cak', name: 'ì¹˜ì¦ˆ ì¼€ì´í¬', price: 7000, img: 'https://placehold.co/150x150/2ecc71/ffffff?text=CAK' },
            { id: 'sco', name: 'í”Œë ˆì¸ ìŠ¤ì½˜', price: 3000, img: 'https://placehold.co/150x150/3498db/ffffff?text=SCO' },
        ]
    };

    // ì¹´í…Œê³ ë¦¬ ì´ë¦„ (í‘œì‹œìš©)
    const categoryNames = {
        'coffee': 'ì»¤í”¼',
        'tea': 'ì°¨/ìŒë£Œ',
        'dessert': 'ë””ì €íŠ¸',
    };

    // --- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ---

    // ìˆ«ì í¬ë§·íŒ… (ì˜ˆ: 4000 -> 4,000ì›)
    const formatCurrency = (amount) => amount.toLocaleString('ko-KR') + 'ì›';

    // ì‚¬ìš©ìì—ê²Œ ë©”ì‹œì§€ë¥¼ ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜ (alert() ëŒ€ì²´)
    function showMessage(message) {
        const messageBox = document.getElementById('kiosk-message');
        document.getElementById('message-content').innerText = message;
        messageBox.classList.remove('hidden');
        messageBox.classList.add('flex');
    }

    function hideMessage() {
        const messageBox = document.getElementById('kiosk-message');
        messageBox.classList.add('hidden');
        messageBox.classList.remove('flex');
    }

    // --- ë Œë”ë§ í•¨ìˆ˜ ---

    // ì¹´í…Œê³ ë¦¬ ë©”ë‰´ ë Œë”ë§
    function renderCategories() {
        const nav = document.getElementById('category-nav');
        nav.innerHTML = '';

        Object.keys(menuData).forEach(catId => {
            const isActive = catId === currentCategory;
            const button = document.createElement('button');
            button.className = `w-full py-4 mb-2 text-center rounded-lg font-semibold transition duration-150 ${
                isActive
                    ? 'bg-red-500 text-white shadow-md'
                    : 'bg-white text-gray-700 hover:bg-red-100 hover:text-red-600'
            } text-sm whitespace-nowrap`;
            button.textContent = categoryNames[catId];
            button.onclick = () => switchCategory(catId);
            nav.appendChild(button);
        });
    }

    // ë©”ë‰´ í•­ëª© ë Œë”ë§
    function renderMenuItems() {
        const display = document.getElementById('menu-display');
        display.innerHTML = '';

        const items = menuData[currentCategory] || [];

        if (items.length === 0) {
            display.innerHTML = `<p class="text-center text-gray-500 col-span-full py-10">í˜„ì¬ ë©”ë‰´ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.</p>`;
            return;
        }

        items.forEach(item => {
            const itemEl = document.createElement('div');
            itemEl.className = 'menu-item cursor-pointer bg-white p-3 rounded-xl shadow-md hover:shadow-lg transition duration-150 border-2 border-transparent hover:border-red-400';
            itemEl.innerHTML = `
                <img src="${item.img}" alt="${item.name}" class="w-full h-32 object-cover rounded-lg mb-2" onerror="this.onerror=null;this.src='https://placehold.co/150x150/eeeeee/333333?text=${item.name.slice(0, 3)}';">
                <h3 class="text-lg font-semibold text-gray-900 truncate">${item.name}</h3>
                <p class="text-red-600 font-bold text-xl">${formatCurrency(item.price)}</p>
            `;
            itemEl.onclick = () => addItemToCart(item);
            display.appendChild(itemEl);
        });
    }

    // ì¥ë°”êµ¬ë‹ˆ í•­ëª© ë Œë”ë§ ë° ì´ì•¡ ì—…ë°ì´íŠ¸
    function renderCart() {
        const cartList = document.getElementById('cart-items');
        const emptyMessage = document.getElementById('empty-cart-message');
        const totalPriceEl = document.getElementById('total-price');
        const orderButton = document.getElementById('order-button');

        let total = 0;
        let cartHtml = '';
        const cartItemsArray = Object.values(cart);

        if (cartItemsArray.length === 0) {
            emptyMessage.classList.remove('hidden');
            orderButton.disabled = true;
        } else {
            emptyMessage.classList.add('hidden');
            orderButton.disabled = false;
        }

        cartItemsArray.forEach(cartItem => {
            const itemTotal = cartItem.item.price * cartItem.count;
            total += itemTotal;

            cartHtml += `
                <div class="flex items-center justify-between py-1.5 px-1 hover:bg-red-50 rounded-lg">
                    <span class="text-gray-700 font-medium truncate">${cartItem.item.name}</span>
                    <div class="flex items-center space-x-3">
                        <button onclick="decrementItem('${cartItem.item.id}')"
                            class="w-6 h-6 bg-red-100 text-red-600 rounded-full hover:bg-red-200 text-xl font-bold leading-none">-</button>
                        <span class="font-bold w-4 text-center">${cartItem.count}</span>
                        <button onclick="incrementItem('${cartItem.item.id}')"
                            class="w-6 h-6 bg-red-100 text-red-600 rounded-full hover:bg-red-200 text-xl font-bold leading-none">+</button>
                        <span class="text-gray-800 font-semibold w-20 text-right">${formatCurrency(itemTotal)}</span>
                    </div>
                </div>
            `;
        });

        cartList.innerHTML = cartHtml;
        totalPriceEl.textContent = formatCurrency(total);
    }

    // --- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ---

    // ì¹´í…Œê³ ë¦¬ ì „í™˜
    function switchCategory(catId) {
        currentCategory = catId;
        renderCategories();
        renderMenuItems();
    }

    // ì¥ë°”êµ¬ë‹ˆì— í•­ëª© ì¶”ê°€
    function addItemToCart(item) {
        if (cart[item.id]) {
            cart[item.id].count++;
        } else {
            cart[item.id] = { item: item, count: 1 };
        }
        renderCart();
        showMessage(`${item.name} 1ê°œê°€ ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`);
    }

    // ì¥ë°”êµ¬ë‹ˆ í•­ëª© ìˆ˜ëŸ‰ ì¦ê°€
    function incrementItem(itemId) {
        if (cart[itemId]) {
            cart[itemId].count++;
            renderCart();
        }
    }

    // ì¥ë°”êµ¬ë‹ˆ í•­ëª© ìˆ˜ëŸ‰ ê°ì†Œ
    function decrementItem(itemId) {
        if (cart[itemId]) {
            cart[itemId].count--;
            if (cart[itemId].count <= 0) {
                delete cart[itemId];
            }
            renderCart();
        }
    }

    // ì¥ë°”êµ¬ë‹ˆ ì „ì²´ ë¹„ìš°ê¸°
    function clearCart() {
        if (Object.keys(cart).length === 0) {
            showMessage("ì¥ë°”êµ¬ë‹ˆê°€ ì´ë¯¸ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
            return;
        }
        // ì‚¬ìš©ì í™•ì¸ ê³¼ì •ì€ ì»¤ìŠ¤í…€ ëª¨ë‹¬ë¡œ ëŒ€ì²´
        showMessage("ì¥ë°”êµ¬ë‹ˆë¥¼ ì „ì²´ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì£¼ë¬¸í•´ì£¼ì„¸ìš”.");
        cart = {};
        renderCart();
    }

    // ì£¼ë¬¸ ë° ê²°ì œ (ì‹œë®¬ë ˆì´ì…˜)
    function placeOrder() {
        const total = Object.values(cart).reduce((sum, item) => sum + (item.item.price * item.count), 0);
        if (total === 0) {
            showMessage("ì£¼ë¬¸í•  í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤. ë©”ë‰´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");
            return;
        }

        // ì‹¤ì œ ê²°ì œ ë¡œì§ ëŒ€ì‹  ë©”ì‹œì§€ í‘œì‹œ
        showMessage(`ì´ ${formatCurrency(total)} ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ì£¼ë¬¸ ë²ˆí˜¸ [${Date.now().toString().slice(-4)}]ê°€ ë°œí–‰ë˜ì—ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë©”ë‰´ë¥¼ ìˆ˜ë ¹í•´ ì£¼ì„¸ìš”. ê°ì‚¬í•©ë‹ˆë‹¤!`);

        // ì£¼ë¬¸ í›„ ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°
        cart = {};
        renderCart();

        // ì¹´í…Œê³ ë¦¬ë¥¼ ì´ˆê¸°í™” ìƒíƒœë¡œ ëŒë¦¬ê¸°
        switchCategory('coffee');
    }


    // --- ì´ˆê¸°í™” ---

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™” í•¨ìˆ˜
    window.onload = function() {
        // ì´ˆê¸° ë Œë”ë§
        renderCategories();
        renderMenuItems();
        renderCart();
    };

</script>
</body>
</html>